# 작업 추적 및 재매 시스템

> 작업 중단 시 이 파일을 사용하여 상태를 저장하고, 새 대화에서 재개합니다.

---

## 🔄 작업 재개 방법

### 새 대화에서 재매 시
```
1. 사용자: "재개: WIP-YYYYMMDD-NN"
   또는
   사용자: "CONTINUE: WIP-YYYYMMDD-NN"

2. 에이전트:
   - WORK_IN_PROGRESS.md 읽기
   - 해당 WorkID 상태 확인
   - 마지막 중단 시점 파악
   - "다음 작업" 확인
   - 즉시 재개

3. 재개 완료 후:
   - "🔄 WIP-YYYYMMDD-NN 작업이 재개되었습니다"
   - "현재 단계: [완료된 단계]"
   - "다음 작업: [다음 작업]"
```

---

## 📊 현재 작업 목록

### 활성 작업 (진행 중)
| WorkID | 상태 | 유형 | 제목 | 시작일 | 진척도 |
|--------|------|------|------|--------|--------|
| *(없음)* | - | - | - | - | - |

### 완료 작업 (히스토리)
| WorkID | 완료일 | 유형 | 제목 | 소요시간 |
|--------|--------|------|------|----------|
| WIP-20250201-001 | 2025-02-01 | 신규 | AGENTS.md 개편 | 2.5h |
| WIP-20250201-002 | 2025-02-01 | 수정 | 문서 폴더 생성 | 1.0h |

### 취소된 작업 (취소 히스토리)
| WorkID | 취소일 | 유형 | 제목 | 사유 |
|--------|--------|------|------|------|
| *(없음)* | - | - | - | - |

---

## 📝 작업 상세

### WIP-YYYYMMDD-NN: [작업 제목]

#### 📋 계획 요약
- **유형**: (수정/신규)
- **파일**: ...
- **변경 내용**: ...
- **시작일**: 2025-02-02
- **예상 완료일**: 2025-02-02

#### 💾 상태 스냅샷
- **마지막 업데이트**: [타임스탬프]
- **진척도**: [진척도 %]

#### 📸 상태 백업
```
[Gate-1 진입 전 백업: 2025-02-07 15:00]
- 완료 단계: (없음)
- 계획 요약: [계획 내용]
- 진척도: 0%
```

#### ✅ 완료 단계
- [ ] 1. Plan (계획): 기획서 분석, 유형 판단, 계획 수립
- [ ] 2. Design (설계): 아키텍처 설계, 기술적 검증
- [ ] 3. Code (코딩): 코드 구현, 빌드 확인
- [ ] 4. Test (테스트): 단위 테스트 자동 생성, 기능 테스트, 빌드 테스트
- [ ] 5. Docs (문서화): 각 단계별 문서 업데이트, API 문서 생성
- [ ] 6. QA (품질검사): 코드 품질, 스타일, 아키텍처 준수 검토
- [ ] 7. Review (최종검토): 전체 결과물 종합 검토, 최종 승인

#### 🚪 Validation Gates (검증 게이트)
- [ ] **Gate-1**: Plan → Design
  - [x] 1차 자체 검증 (analyst)
  - [x] 2차 자체 검증 (analyst)
  - [x] 크로스체크 (architect)
  - 통과: ✅

- [ ] **Gate-2**: Design → Code
  - [ ] 1차 자체 검증 (architect)
  - [ ] 2차 자체 검증 (architect)
  - [ ] 크로스체크 (developer)
  - 상태: 대기 중

- [ ] **Gate-3**: Code → Test
  - [ ] 1차 빌드 검증 (developer)
  - [ ] 2차 빌드 검증 (developer)
  - [ ] 크로스 빌드 검증 (reviewer)
  - 상태: 대기 중

- [ ] **Gate-4**: Test → Docs
  - [ ] 1차 테스트 (tester)
  - [ ] 2차 테스트 (tester)
  - [ ] 크로스 테스트 (developer)
  - 상태: 대기 중

- [ ] **Gate-5**: Docs → QA
  - [ ] 1차 검증 (doc-manager)
  - [ ] 2차 검증 (doc-manager)
  - [ ] 크로스체크 (reviewer)
  - 상태: 대기 중

- [ ] **Gate-6**: QA → Review
  - [ ] 1차 검증 (reviewer)
  - [ ] 2차 검증 (reviewer)
  - [ ] 크로스 검증 (architect)
  - 상태: 대기 중

- [ ] **Gate-7**: Review → 완료
  - [ ] 1차 최종 검증 (coordinator)
  - [ ] 2차 최종 검증 (coordinator)
  - [ ] 사용자 승인
  - 상태: 대기 중

#### 🚧 진행 상황
```
[타임스탬프]: 진행 내용
```

#### 🔗 관련 파일
- Services/ExportService.cs
- ViewModels/MainViewModel.cs
- CODE_STYLE.md (에러 처리 섹션)

#### 💬 사용자 메모
```
[사용자의 추가 요청사항 또는 특이사항]
```

---

## 🎯 WorkID 형식

### 추천 형식: **WIP-YYYYMMDD-NN**

**구조:**
- `WIP`: Work In Progress (고정 접두사)
- `YYYYMMDD`: 날짜 (예: 20250202)
- `NN`: 같은 날짜 내 순서 (01, 02, 03...)

**예시:**
```
WIP-20250202-001  # 2025년 2월 2일 첫 번째 작업
WIP-20250202-002  # 같은 날 두 번째 작업
WIP-20250203-001  # 다음 날 첫 번째 작업
```

**장점:**
- ✅ 날짜 기준으로 자동 정렬
- ✅ 충돌 가능성 최소화
- ✅ 히스토리 추적 용이
- ✅ 읽기 쉬움

---

## 🚨 긴급 명령어

### 작업 재개
```
재개: WIP-YYYYMMDD-NN
또는
CONTINUE: WIP-YYYYMMDD-NN
```

### 작업 완료
```
완료: WIP-YYYYMMDD-NN
```
→ 완료 단계 모두 체크
→ 완료 작업으로 이동

### 작업 취소
```
취소: WIP-YYYYMMDD-NN [사유]
```
→ 활성 작업에서 제거
→ 취소 작업으로 이동
→ 사유 기록

### 상태 확인
```
상태: WIP-YYYYMMDD-NN
또는
상태: 전체
```

---

## 📝 작업 완료 시 처리

### 1. 완료 단계 확인
```markdown
- [x] 기획서 분석
- [x] 계획 수립
- [x] 사용자 확인
- [x] 구현 단계1
- [x] 구현 단계2
- [x] 빌드 테스트
- [x] 기능 테스트
- [x] 커밋
```

### 2. 정보 수집
```markdown
완료일: 2025-02-02 16:30
소요 시간: 6.5시간
커밋 메시지: [fix] ExportService null 체크 추가
커밋 해시: abc123def456
```

### 3. 완료 작업으로 이동
```markdown
### 완료 작업 (히스토리)
| WorkID | 완료일 | 유형 | 제목 | 소요시간 |
|--------|--------|------|------|----------|
| WIP-20250202-001 | 2025-02-02 | 수정 | ExportService null 체크 | 6.5h |
```

### 4. 활성 작업에서 제거
```markdown
### 활성 작업 (진행 중)
| WorkID | 상태 | 유형 | 제목 | 시작일 | 진척도 |
|--------|------|------|------|--------|--------|
| *(삭제됨)* | - | - | - | - | - |
```

### 5. 상세 정보 보존 (히스토리용)
```markdown
### 완료된 작업 상세

#### WIP-20250202-001: ExportService null 체크 추가

**완료일:** 2025-02-02 16:30
**소요 시간:** 6.5시간
**커밋:** abc123def456

[전체 내용 보존...]
```

---

## 🗑️ 작업 취소 시 처리

### 1. 취소 사유 기록
```
사용자: "취소: WIP-20250202-001 우선순위 조정으로 인해"
```

### 2. 활성 작업에서 제거
```markdown
### 활성 작업 (진행 중)
| WorkID | 상태 | 유형 | 제목 | 시작일 | 진척도 |
|--------|------|------|------|--------|--------|
| *(삭제됨)* | - | - | - | - | - |
```

### 3. 취소 작업으로 이동
```markdown
### 취소된 작업 (취소 히스토리)
| WorkID | 취소일 | 유형 | 제목 | 사유 |
|--------|--------|------|------|------|
| WIP-20250202-001 | 2025-02-02 15:00 | 수정 | ExportService null 체크 | 우선순위 조정 |
```

---

## 🔍 상태 확인 명령어

### 특정 작업 상태
```
상태: WIP-20250202-001
```
→ 해당 WorkID의 상세 상태 출력

### 전체 상태
```
상태: 전체
```
→ 현재 활성 작업, 완료 작업, 취소 작업 모두 요약

---

## 📖 사용 예시

### 시나리오 1: 새 대화에서 작업 재개

```
사용자: "재개: WIP-20250202-001"

에이전트:
🔄 WIP-20250202-001 작업이 재개되었습니다.

현재 단계: 구현 단계2 (완료)
다음 작업: 빌드 테스트

관련 파일:
- Services/ExportService.cs
- ViewModels/MainViewModel.cs

진행하시겠습니까? (y/n)
```

---

### 시나리오 2: 작업 완료

```
사용자: "완료: WIP-20250202-001"

에이전트:
✅ WIP-20250202-001 작업이 완료되었습니다.

[완료 요약]
- 완료일: 2025-02-02 16:30
- 소요 시간: 6.5시간
- 커밋: [fix] ExportService null 체크 추가

[다음 단계]
- WORK_IN_PROGRESS.md 업데이트 (완료 작업으로 이동)
- 필요 시 보고서 생성
```

---

### 시나리오 3: 작업 취소

```
사용자: "취소: WIP-20250202-001 우선순위 조정으로 인해"

에이전트:
⚠️ WIP-20250202-001 작업이 취소되었습니다.

[취소 정보]
- 사유: 우선순위 조정으로 인해
- 진척도: 구현 단계2 완료
- 소요 시간: 5.0시간

[정보 보존]
- 상세 정보는 취소 작업 히스토리에 보존됨
```

---

## 🔄 WorkID 충돌 방지 시스템

### 쓰기 전 읽기 (Read-Before-Write)
```
1. WORK_IN_PROGRESS.md 전체 읽기
2. 마지막 WorkID 확인
3. 새 WorkID 생성
4. WORK_IN_PROGRESS.md 다시 읽기 (중간에 다른 에이전트가 썼는지 확인)
5. 마지막 WorkID가 변경되었으면 2부터 다시 시작
6. 변경되지 않았으면 쓰기
```

### 재시도 로직
```
최대 3번 재시도:
- 1차 시도: WorkID 생성 시도
- 2차 시도: 충돌 시 다시 WorkID 생성
- 3차 시도: 또 충돌 시 다시 WorkID 생성
- 3차 시도 후 실패: 사용자에게 수동 요청
```

### 충돌 발생 시 처리
```markdown
에이전트:
⚠️ WorkID 생성 실패: 3번 시도 후 충돌 발생

[상황]
- 시도한 WorkID: WIP-20250207-003
- 마지막 WorkID: WIP-20250207-003 (다른 에이전트가 생성)

[요청]
사용자가 직접 WorkID를 지정하거나, 나중에 다시 시도해주세요.

[옵션]
1. 사용자: "WorkID는 WIP-20250207-004로 지정해줘"
2. 사용자: "나중에 다시 시도해줘"
```

---

## 🔄 롤백 시 상태 복구

### 백업 확인
```
1. WORK_IN_PROGRESS.md에서 Gate 진입 전 백업 섹션 확인
2. 스냅샷 섹션 확인
3. 롤백 대상 단계 확인
```

### 상태 복구 수행
```
1. Gate 실패 원인 분석
2. 백업 상태 확인
3. 스냅샷 상태로 복구
   - 완료 단계 롤백
   - Gate 상태 초기화
   - 진척도 조정
4. WORK_IN_PROGRESS.md 업데이트
```

### 복구 완료 확인
```
1. WORK_IN_PROGRESS.md 상태 확인
2. 다음 단계 에이전트에게 알림
3. 진행 계속
```

---

## 🎯 에이전트 동작 가이드

### 작업 시작 시
1. 새로운 WorkID 생성: `WIP-YYYYMMDD-NN` (최대 3번 재시도로 충돌 방지)
2. 활성 작업에 추가
3. 상세 정보 기록

### 진행 중 업데이트
1. 진행 상황에 타임스탬프 기록
2. 완료 단계 체크
3. 필요 시 사용자에게 진행 상황 보고

### Gate 진입/통과/실패 시 업데이트
1. Gate 진입 전 백업 저장
2. Gate 통과 시 스냅샷 저장
3. Gate 실패 시 에러 기록 및 롤백 준비

### 상태 복구 (롤백 시)
1. 백업 상태 확인
2. 스냅샷 상태로 복구
3. WORK_IN_PROGRESS.md 상태 업데이트

### 작업 완료 시
1. 완료 단계 모두 체크
2. 완료 정보 수집
3. 완료 작업으로 이동
4. 상세 정보 보존

### 작업 취소 시
1. 취소 사유 기록
2. 취소 작업으로 이동
3. 상세 정보 보존

---

## 📚 관련 문서

- [기획서 워크플로우](WORKFLOW_PLANNING.md)
- [빠른 참조](QUICK_REFERENCE.md)
- [프로젝트 요약](PROJECT_SUMMARY.md)
